<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì •ë¹„ ê´€ë¦¬ | ìë™ì°¨ êµìœ¡ê³¼ì • í†µí•© ì‹œìŠ¤í…œ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    
    <style>
        /* [DESIGN_FIXED] ê¸°ì¡´ ë””ìì¸ ê·œê²© 100% ìœ ì§€ */
        body { font-family: 'Malgun Gothic', sans-serif; background-color: #f4f7f6; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 1400px; margin: 30px auto; background: white; padding: 40px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); min-height: 90vh; }
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 3px solid #3498db; padding-bottom: 15px; margin-bottom: 20px; }
        .class-info-bar { background: #e3f2fd; padding: 12px; border-radius: 10px; margin-bottom: 20px; display: flex; align-items: center; gap: 15px; }
        .btn-home { padding: 6px 12px; cursor: pointer; border: 1px solid #3498db; border-radius: 6px; background: white; color: #3498db; font-weight: bold; text-decoration: none; font-size: 13px; }
        .current-badge { background: #2c3e50; color: white; padding: 4px 12px; border-radius: 15px; font-size: 13px; font-weight: bold; }
        .section-card { background: #fff; padding: 15px; border-radius: 10px; border: 1px solid #e1e4e8; margin-bottom: 20px; }
        .top-action-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .info-grid { display: grid; grid-template-columns: 2fr 1.5fr 1fr 1fr; gap: 15px; margin-top: 10px; }
        .info-item label { display: block; font-size: 12px; color: #666; margin-bottom: 5px; font-weight: bold; }
        .info-item input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; font-size: 13px; }
        #trainingPeriod { background: #fff; color: #e67e22; font-weight: bold; border: 2px solid #e67e22; }
        .scroll-box { max-height: 600px; overflow-y: auto; border: 1px solid #dee2e6; border-radius: 8px; position: relative; }
        .course-table { width: 100%; border-collapse: collapse; font-size: 12px; table-layout: fixed; border: 1px solid #dee2e6; }
        .course-table th { background: #f8f9fa; position: sticky; top: 0; z-index: 30; padding: 14px 10px; border: 1px solid #dee2e6; font-weight: 800; }
        .summary-row td { background-color: #2c3e50 !important; color: #ffffff !important; font-weight: bold; position: sticky; top: 45px; z-index: 25; border-bottom: 3px solid #3498db; padding: 10px; }
        .course-table td { border: 1px solid #dee2e6; text-align: center; vertical-align: middle; background: white; line-height: 1.4; padding: 0; }
        .subject-cell { background-color: #f0f7ff; font-weight: bold; color: #2c3e50; border-right: 3px solid #3498db !important; padding: 5px !important; }
        .subject-total-cell { background-color: #fff9f0; font-weight: bold; color: #e67e22; border-left: 3px solid #e67e22 !important; padding: 5px !important; }
        .top-border-thick { border-top: 3px solid #3498db !important; }
        .sub-item-container { display: flex; flex-direction: column; width: 100%; height: 100%; }
        .sub-item-row { display: flex; align-items: center; justify-content: center; border-bottom: 1px solid #eee; min-height: 35px; box-sizing: border-box; }
        .sub-item-row:last-child { border-bottom: none; }
        .editable-input { width: 100%; height: 100%; border: none; background: transparent; text-align: center; font-size: 12px; font-family: inherit; }
        .editable-input:focus { background: #fffde7; outline: none; }
        .text-left { text-align: left; padding-left: 10px; }
        .btn { padding: 9px 18px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold; font-size: 12px; transition: 0.2s; }
        .btn-blue { background: #3498db; color: white; }
        .btn-green { background: #27ae60; color: white; }
        .btn-orange { background: #e67e22; color: white; }
        .btn-red { background: #e74c3c; color: white; }
        .upload-action-bar { display: flex; align-items: center; gap: 10px; background: #fffef0; padding: 10px; border: 1px dashed #e67e22; border-radius: 8px; margin-top: 5px; }

        .file-upload-wrapper { position: relative; display: inline-block; width: 100%; }
        .file-upload-label { display: block; background: #3498db; color: white; padding: 12px; text-align: center; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.3s; border: 2px solid #2980b9; }
        .file-upload-label:hover { background: #2980b9; box-shadow: 0 4px 10px rgba(0,0,0,0.15); }
        #timetableFile { position: absolute; left: 0; top: 0; opacity: 0; width: 100%; height: 100%; cursor: pointer; }

        /* ì—°ê²° ìƒíƒœ ë””ìì¸ ì¶”ê°€ */
        #connectionStatus { font-size: 12px; font-weight: bold; padding: 5px 10px; border-radius: 5px; }
        .status-online { color: #27ae60; background: #e8f5e9; }
        .status-offline { color: #e74c3c; background: #fdeaea; }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>ğŸš— ë¶€ì‚° ìë™ì°¨ êµìœ¡ê³¼ì • í†µí•© ì‹œìŠ¤í…œ</h1>
        <div id="connectionStatus">â³ ì—°ê²° í™•ì¸ ì¤‘...</div>
    </div>

    <div class="top-action-grid">
        <div class="section-card" style="border-top: 4px solid #3498db;">
            <h4 style="margin-top:0;">ğŸ“… ì‹œê°„í‘œ ë“±ë¡ ë° ê´€ë¦¬</h4>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <div class="file-upload-wrapper">
                    <label for="timetableFile" class="file-upload-label">ğŸ“ ì‹œê°„í‘œ ë“±ë¡ (Excel)</label>
                    <input type="file" id="timetableFile" accept=".xlsx, .xls" onchange="processTimetable(this)">
                </div>
                
                <div id="fileStatusBox" style="display: none;">
                    <div class="upload-action-bar">
                        <span style="font-size: 12px; color: #2c3e50; font-weight: bold;">ğŸ“„ íŒŒì¼: <span id="savedFileName">-</span></span>
                        <button class="btn btn-green" style="padding: 5px 10px; font-size: 11px;" onclick="confirmTimetableSave()">ğŸ’¾ ì„œë²„ í™•ì • ì €ì¥</button>
                        <button class="btn btn-red" style="padding: 5px 10px; font-size: 11px;" onclick="deleteTimetable()">âŒ ì „ì²´ ì‚­ì œ</button>
                    </div>
                </div>
                <button id="downloadBtn" class="btn btn-blue" style="display:none; width: 100%;" onclick="downloadSavedTimetable()">ğŸ“¥ ë“±ë¡ëœ ì‹œê°„í‘œ ë‹¤ìš´</button>
            </div>
        </div>
        <div class="section-card" style="border-top: 4px solid #27ae60;">
            <h4 style="margin-top:0;">ğŸ“ ì¶œê²° ê´€ë¦¬ ë° ë¶„ì„</h4>
            <div style="display: flex; flex-direction: column; gap: 10px;">
                <button class="btn btn-orange" onclick="location.href='ì¼ì¼ì¶œì„ë¶€.html?class=' + currentClass">ğŸ“… ì¼ì¼ì¶œì„ë¶€ ë“±ë¡</button>
                <button class="btn btn-green" onclick="location.href='ëŠ¥ë ¥ë‹¨ìœ„ì‹œê°„í‘œ.html?class=' + currentClass">ğŸ“Š ëŠ¥ë ¥ë‹¨ìœ„ë³„ ë¶„ì„ê¸°</button>
            </div>
        </div>
    </div>

    <div class="class-info-bar">
        <a href="select_class.html" class="btn-home">â—€ ë°˜ ì„ íƒ ì´ë™</a>
        <div style="margin-left: auto;">
            <span>í˜„ì¬ í•™ê¸‰: </span>
            <span id="currentClassDisplay" class="current-badge">ë¡œë”© ì¤‘...</span>
        </div>
    </div>

    <div class="section-card">
        <h3 style="margin-top:0;">ğŸ“‹ í›ˆë ¨ ê³¼ì • ê°œìš”</h3>
        <div class="info-grid">
            <div class="info-item"><label>í›ˆë ¨ëª…</label><input type="text" id="trainingName"></div>
            <div class="info-item"><label>í›ˆë ¨ê¸°ê°„</label><input type="text" id="trainingPeriod"></div>
            <div class="info-item"><label>ì´ ì¼ìˆ˜</label><input type="text" id="totalDays" readonly style="background:#f8f9fa;"></div>
            <div class="info-item"><label>ë‹´ë‹¹êµì‚¬</label><input type="text" id="teacherName" readonly style="background:#f8f9fa;"></div>
        </div>
    </div>

    <div class="section-card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <h3>ğŸ“‚ êµê³¼ëª© ìƒì„¸ í˜„í™©</h3>
            <div style="display: flex; gap: 8px;">
                <button class="btn btn-orange" onclick="clearAndDefault()">ì´ˆê¸°í™”</button>
                <button class="btn btn-blue" onclick="addCourseRow()">+ ìˆ˜ë™ í–‰ ì¶”ê°€</button>
                <button class="btn btn-green" onclick="saveAllDataWithAlert()">ğŸ’¾ ì„œë²„ ì €ì¥</button>
            </div>
        </div>
        <div class="scroll-box">
            <table class="course-table">
                <thead>
                    <tr><th width="15%">êµê³¼ëª©</th><th width="20%">ëŠ¥ë ¥ë‹¨ìœ„ëª…</th><th width="35%">ì„¸ë¶€êµê³¼</th><th width="10%">ì‹œê°„(h)</th><th width="10%">ì´ ì‹œê°„</th><th width="8%">ê´€ë¦¬</th></tr>
                </thead>
                <tbody id="courseTableBody"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
const firebaseConfig = {
    apiKey: "AIzaSyCO37zrsZEjKTokMCNWbIc1C_o5BZMqh8E",
    authDomain: "busan-teacher-work.firebaseapp.app",
    databaseURL: "https://busan-teacher-work-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "busan-teacher-work",
    storageBucket: "busan-teacher-work.firebasestorage.app"
};
if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// [ì¶”ê°€] ì‹¤ì‹œê°„ ì—°ê²° ìƒíƒœ ê°ì§€ ë¡œì§
const connectedRef = database.ref(".info/connected");
connectedRef.on("value", (snap) => {
    const statusDiv = document.getElementById("connectionStatus");
    if (snap.val() === true) {
        statusDiv.innerText = "âœ… ì„œë²„ ì—°ê²°ë¨";
        statusDiv.className = "status-online";
    } else {
        statusDiv.innerText = "âŒ ì—°ê²° ëŠê¹€";
        statusDiv.className = "status-offline";
    }
});

const urlParams = new URLSearchParams(window.location.search);
let currentClass = urlParams.get('class') || "í…ŒìŠ¤íŠ¸";
document.getElementById('currentClassDisplay').innerText = currentClass;

let tempJsonData = null; let tempFileName = "";

function initializePage() { loadData(); checkTimetableStatus(); }

function getVal(row, keys) {
    for (let k in row) {
        let cleanK = String(k).replace(/[\sÂ·ã†\n\r,]/g, '');
        if (keys.includes(cleanK)) return row[k];
    }
    return "";
}

function fixDate(val) {
    if (!val) return "";
    if (typeof val === 'string' && /^\d{4}-\d{2}-\d{2}/.test(val)) return val.substring(0, 10);
    if (val instanceof Date) {
        const offset = val.getTimezoneOffset() * 60000;
        const localDate = new Date(val.getTime() - offset);
        return localDate.toISOString().split('T')[0];
    }
    let s = String(val).trim();
    if (!isNaN(s) && s.length < 8 && s !== "") {
        let d = new Date((parseInt(s) - 25569) * 86400 * 1000);
        const offset = d.getTimezoneOffset() * 60000;
        const localDate = new Date(d.getTime() - offset);
        return localDate.toISOString().split('T')[0];
    }
    return s;
}

function processTimetable(input) {
    const file = input.files[0]; if(!file) return;
    const reader = new FileReader();
    reader.onload = function(e) {
        const data = new Uint8Array(e.target.result);
        const workbook = XLSX.read(data, {type: 'array', cellDates: true, dateNF: 'yyyy-mm-dd'});
        const sheetName = workbook.SheetNames[0];
        const json = XLSX.utils.sheet_to_json(workbook.Sheets[sheetName], { raw: false });
        
        let rawProcessed = json.map(row => {
            let d = fixDate(getVal(row, ['ë‚ ì§œ', 'ì¼ë³„']));
            let pRaw = String(getVal(row, ['êµì‹œ']));
            if (pRaw.includes("ì ì‹¬") || !d) return null;
            let pNum = parseInt(pRaw.replace(/[^0-9]/g, '')) || 0;
            return { _box: row, _date: d, _period: pNum };
        }).filter(b => b !== null);

        rawProcessed.sort((a, b) => {
            if (a._date !== b._date) return a._date.localeCompare(b._date);
            return a._period - b._period;
        });

        const cleanJson = rawProcessed.map(box => {
            const o = box._box;
            return {
                "ì¼ìˆ˜": getVal(o, ['ì¼ìˆ˜']),
                "ë‚ ì§œ": box._date,
                "ìš”ì¼": getVal(o, ['ìš”ì¼']),
                "êµì‹œ": box._period,
                "ì‹œê°„": getVal(o, ['í›ˆë ¨ì‹œê°„', 'êµìœ¡ì‹œê°„']),
                "êµê³¼ëª©": getVal(o, ['êµê³¼ëª©ëª…', 'êµê³¼ëª©']),
                "ëŠ¥ë ¥ë‹¨ìœ„": getVal(o, ['ëŠ¥ë ¥ë‹¨ìœ„ëª…']),
                "ì„¸ë¶€êµê³¼": getVal(o, ['ì„¸ë¶€êµê³¼']),
                "êµì‚¬": getVal(o, ['í›ˆë ¨êµì‚¬', 'í›ˆë ¨êµÂ·ê°•ì‚¬']),
                "ì¥ì†Œ": getVal(o, ['í›ˆë ¨ì¥ì†Œ', 'í›ˆë ¨ì‹œì„¤ëª…'])
            };
        });

        autoCalculateSummary(cleanJson);
        const studyRows = cleanJson.filter(r => String(r.êµê³¼ëª© || "").trim() !== "" && String(r.ëŠ¥ë ¥ë‹¨ìœ„ || "").trim() !== "");
        const renderData = studyRows.map(r => ({ subject: r.êµê³¼ëª©, unit: r.ëŠ¥ë ¥ë‹¨ìœ„, detail: r.ì„¸ë¶€êµê³¼ }));
        renderCourseTable(renderData);

        tempJsonData = cleanJson; tempFileName = file.name;
        document.getElementById('fileStatusBox').style.display = "block";
        document.getElementById('savedFileName').innerText = file.name;
        document.getElementById('downloadBtn').style.display = "none";
    };
    reader.readAsArrayBuffer(file);
}

function renderCourseTable(data) {
    const map = {};
    data.forEach(r => {
        let subName = r.subject || 'ë¯¸ë¶„ë¥˜';
        let unitName = r.unit || 'ë¯¸ë¶„ë¥˜';
        let k = subName + "|" + unitName;
        if(!map[k]) map[k] = { sub: subName, unit: unitName, det: {}, total: 0 };
        let detName = r.detail || 'ë¯¸ì§€ì •';
        map[k].det[detName] = (map[k].det[detName] || 0) + 1;
        map[k].total++;
    });
    renderTable(Object.values(map).map(v => ({ subject: v.sub, unit: v.unit, details: Object.entries(v.det).map(([n, h]) => ({ name: n, hour: h })), totalHours: v.total })));
}

function autoCalculateSummary(data) {
    const dates = data.map(r => r.ë‚ ì§œ).filter(d => d && d.includes('-')).sort();
    if(dates.length > 0) document.getElementById('trainingPeriod').value = dates[0] + " ~ " + dates[dates.length-1];
    const maxDay = Math.max(...data.map(r => parseInt(r.ì¼ìˆ˜) || 0));
    if(maxDay > 0) document.getElementById('totalDays').value = maxDay + "ì¼";
    const ts = {}; data.forEach(r => { if(r.êµì‚¬) ts[r.êµì‚¬] = (ts[r.êµì‚¬] || 0) + 1; });
    let top = "-", mc = 0; for(let t in ts) if(ts[t] > mc) { top = t; mc = ts[t]; }
    document.getElementById('teacherName').value = top;
}

function checkTimetableStatus() {
    database.ref(`${currentClass}/timetableStorage`).once('value', snap => {
        const info = snap.val();
        if(info && info.data) {
            document.getElementById('fileStatusBox').style.display = "block";
            document.getElementById('savedFileName').innerText = info.fileName;
            document.getElementById('downloadBtn').style.display = "block";
            autoCalculateSummary(info.data);
        }
    });
}

async function confirmTimetableSave() {
    if(!tempJsonData) return;
    await database.ref(`${currentClass}/timetableStorage`).set({ fileName: tempFileName, data: tempJsonData });
    await database.ref(`${currentClass}/fullTimetable`).set(tempJsonData);
    await saveAllData(); alert("âœ… ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ ì™„ë£Œ!");
    checkTimetableStatus();
}

function renderTable(list) {
    const tbody = document.getElementById('courseTableBody'); tbody.innerHTML = '';
    let gH = 0; const grp = {};
    list.forEach(item => {
        if(!grp[item.subject]) grp[item.subject] = { units: [], total: 0 };
        grp[item.subject].units.push(item);
        item.details.forEach(d => { grp[item.subject].total += Number(d.hour); gH += Number(d.hour); });
    });
    const subs = Object.keys(grp).sort();
    const sumTr = document.createElement('tr'); sumTr.className = 'summary-row';
    sumTr.innerHTML = `<td>êµê³¼ëª©: ${subs.length}ì¢…</td><td>ëŠ¥ë ¥ë‹¨ìœ„: ${list.length}ê°œ</td><td>- ê³¼ì • ìš”ì•½ í˜„í™© -</td><td>ì „ì²´: ${gH}h</td><td>ì „ì²´: ${gH}h</td><td>ìš”ì•½</td>`;
    tbody.appendChild(sumTr);
    subs.forEach(s => {
        const us = grp[s].units;
        us.forEach((u, i) => {
            const tr = document.createElement('tr'); if(i === 0) tr.className = 'top-border-thick';
            tr.innerHTML = `${i === 0 ? `<td rowspan="${us.length}" class="subject-cell"><input class="editable-input c-subject-input" value="${s}" style="font-weight:bold;"></td>` : ''}<td><input class="editable-input c-unit-input" value="${u.unit}"></td><td><div class="sub-item-container">${u.details.map(d => `<div class="sub-item-row"><input class="editable-input sub-detail-input text-left" value="${d.name}"></div>`).join('')}</div></td><td><div class="sub-item-container">${u.details.map(d => `<div class="sub-item-row"><input class="editable-input sub-hour-input" value="${d.hour}"></div>`).join('')}</div></td>${i === 0 ? `<td rowspan="${us.length}" class="subject-total-cell"><input class="editable-input c-subtotal-input" value="${grp[s].total}"></td>` : ''}<td><button class="btn btn-red" onclick="this.parentElement.parentElement.remove()">ì‚­ì œ</button></td>`;
            tbody.appendChild(tr);
        });
    });
}

async function saveAllDataWithAlert() { await saveAllData(); alert("âœ… ì„œë²„ ì €ì¥ ì™„ë£Œ!"); }
async function saveAllData() {
    const rows = document.querySelectorAll('#courseTableBody tr:not(.summary-row)');
    const list = [];
    rows.forEach(r => {
        const u = r.querySelector('.c-unit-input'); if(u) {
            let s = r.querySelector('.c-subject-input')?.value;
            if(!s) { let p = r.previousElementSibling; while(p) { if(p.querySelector('.c-subject-input')) { s = p.querySelector('.c-subject-input').value; break; } p = p.previousElementSibling; } }
            const ds = []; r.querySelectorAll('.sub-detail-input').forEach((inpt, idx) => { ds.push({ name: inpt.value, hour: r.querySelectorAll('.sub-hour-input')[idx].value }); });
            list.push({ subject: s, unit: u.value, details: ds });
        }
    });
    return database.ref(`${currentClass}/masterData`).set({ name: document.getElementById('trainingName').value, period: document.getElementById('trainingPeriod').value, days: document.getElementById('totalDays').value, teacher: document.getElementById('teacherName').value, courses: list });
}

function loadData() {
    database.ref(`${currentClass}/masterData`).once('value', snap => {
        const d = snap.val() || {};
        document.getElementById('trainingName').value = d.name || "";
        document.getElementById('trainingPeriod').value = d.period || "";
        document.getElementById('totalDays').value = d.days || "";
        document.getElementById('teacherName').value = d.teacher || "";
        if(d.courses) renderCourseTableFromDB(d.courses);
    });
}
function renderCourseTableFromDB(courses) {
    const list = courses.map(c => {
        let total = 0; c.details.forEach(d => total += Number(d.hour));
        return { subject: c.subject, unit: c.unit, details: c.details, totalHours: total };
    });
    renderTable(list);
}
async function deleteTimetable() { if(confirm("ì „ì²´ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) { await database.ref(`${currentClass}/timetableStorage`).remove(); await database.ref(`${currentClass}/fullTimetable`).remove(); await database.ref(`${currentClass}/masterData`).remove(); location.reload(); } }

function downloadSavedTimetable() {
    database.ref(`${currentClass}/timetableStorage`).once('value', snap => {
        const info = snap.val();
        if(info && info.data) {
            const headerOrder = ["ì¼ìˆ˜", "ë‚ ì§œ", "ìš”ì¼", "êµì‹œ", "ì‹œê°„", "êµê³¼ëª©", "ëŠ¥ë ¥ë‹¨ìœ„", "ì„¸ë¶€êµê³¼", "êµì‚¬", "ì¥ì†Œ"];
            const sortedData = info.data.map(row => {
                const newRow = {};
                headerOrder.forEach(key => { newRow[key] = row[key] || ""; });
                return newRow;
            });
            const ws = XLSX.utils.json_to_sheet(sortedData, { header: headerOrder });
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "ì‹œê°„í‘œ");
            XLSX.writeFile(wb, info.fileName || `ì‹œê°„í‘œ_${currentClass}.xlsx`);
        } else { alert("ì„œë²„ì— ì €ì¥ëœ ì‹œê°„í‘œê°€ ì—†ìŠµë‹ˆë‹¤."); }
    });
}

function clearAndDefault() { if(confirm("ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) renderTable([]); }
function addCourseRow() {
    const tbody = document.getElementById('courseTableBody');
    const tr = document.createElement('tr');
    tr.innerHTML = `<td class="subject-cell"><input class="editable-input c-subject-input" placeholder="êµê³¼ëª©"></td><td><input class="editable-input c-unit-input" placeholder="ëŠ¥ë ¥ë‹¨ìœ„"></td><td><div class="sub-item-container"><div class="sub-item-row"><input class="editable-input sub-detail-input text-left" placeholder="ì„¸ë¶€ë‚´ìš©"></div></div></td><td><div class="sub-item-container"><div class="sub-item-row"><input class="editable-input sub-hour-input" placeholder="0"></div></div></td><td class="subject-total-cell"><input class="editable-input c-subtotal-input" value="0"></td><td><button class="btn btn-red" onclick="this.parentElement.parentElement.remove()">ì‚­ì œ</button></td>`;
    tbody.appendChild(tr);
}
initializePage();
</script>
</body>
</html>